{"version":3,"sources":["webpack:///static/js/4.90c28cf73588d7d86a51.js","webpack:///./src/components/ImgUploader.vue?accf***","webpack:///./src/components/ImgUploader.vue?aebf***","webpack:///./src/components/ImgUploader.vue","webpack:///./src/components/ImgUploader.vue?f8b7***","webpack:///ImgUploader.vue?58d6**","webpack:///./src/pages/author-edit/author-edit.scss","webpack:///./src/pages/author-edit/author-edit.scss?83c7","webpack:///./src/pages/author-edit/author-edit.vue","webpack:///./src/pages/author-edit/author-edit.vue?27d2","webpack:///author-edit.vue"],"names":["webpackJsonp","19","module","exports","__webpack_require__","push","id","version","sources","names","mappings","file","sourcesContent","sourceRoot","20","content","locals","21","Component","22","render","_vm","this","_h","$createElement","_c","_self","attrs","action","uploadUrl","data","uploadImgData","name","on-success","onSuccess","before-upload","checkData","size","type","_v","_s","btnText","staticRenderFns","28","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_promise","_promise2","qiniuImgUrl","qnImgUrl","token","props","watch","initConfig","mounted","methods","_this","resolve","reject","limit","reader","FileReader","readAsDataURL","onload","e","img","Image","src","target","result","console","log","width","height","$emit","_imgUrl","key","251","296","391","442","staticClass","ref","model","authorForm","rules","label-width","label","prop","directives","rawName","expression","domProps","on","input","$event","e_name","e_avatar","_e","uptoken","domain","uploadSuccess","onSizeError","sizeError","click","submitForm","resetForm","720","_assign","_assign2","_api","_api2","_ImgUploader","_ImgUploader2","getUploadUrl","required","message","trigger","components","img-uploader","editorUpload","authorId","$route","params","getPrevAuthorInfo","get","ext","then","res","body","_this2","e_id","code","eavatar","ename","e_type","etype","formName","_this3","$refs","validate","valid","editAuthor","addAuthor","$alert","confirmButtonText","catch","resetFields","uploadImgSucess","response","url","_this4","_addData","post","$notify","$router","_this5","_editData","put","back"],"mappings":"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","file":"static/js/4.90c28cf73588d7d86a51.js","sourcesContent":["webpackJsonp([4,48],{\n\n/***/ 19:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(3)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".el-upload{margin-top:12px}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/ImgUploader.vue\"],\"names\":[],\"mappings\":\"AACA,WACE,eAAiB,CAClB\",\"file\":\"ImgUploader.vue\",\"sourcesContent\":[\"\\n.el-upload{\\n  margin-top: 12px;\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 20:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(19);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./ImgUploader.vue\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./ImgUploader.vue\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 21:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(20)\n\t\n\tvar Component = __webpack_require__(2)(\n\t  /* script */\n\t  __webpack_require__(28),\n\t  /* template */\n\t  __webpack_require__(22),\n\t  /* scopeId */\n\t  null,\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ },\n\n/***/ 22:\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', [_c('el-upload', {\n\t    attrs: {\n\t      \"action\": _vm.uploadUrl,\n\t      \"data\": _vm.uploadImgData,\n\t      \"name\": 'file',\n\t      \"on-success\": _vm.onSuccess,\n\t      \"before-upload\": _vm.checkData\n\t    }\n\t  }, [_c('el-button', {\n\t    attrs: {\n\t      \"size\": \"small\",\n\t      \"type\": \"primary\"\n\t    }\n\t  }, [_vm._v(_vm._s(_vm.btnText))])], 1)], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n\n/***/ 28:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _promise = __webpack_require__(36);\n\t\n\tvar _promise2 = _interopRequireDefault(_promise);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  data: function data() {\n\t    return {\n\t      uploadUrl: 'http://up-z2.qiniu.com/',\n\t      qiniuImgUrl: this.qnImgUrl,\n\t      uploadImgData: {\n\t        token: ''\n\t      }\n\t    };\n\t  },\n\t\n\t  props: ['btnText', 'token', 'limit', 'qnImgUrl'],\n\t  watch: {\n\t    'token': function token() {\n\t      if (this.token && this.token !== '') {\n\t        this.initConfig();\n\t      }\n\t    }\n\t  },\n\t  mounted: function mounted() {},\n\t\n\t  methods: {\n\t    initConfig: function initConfig() {\n\t      this.uploadImgData = {\n\t        token: this.token\n\t      };\n\t    },\n\t    checkData: function checkData(file) {\n\t      var _this = this;\n\t\n\t      return new _promise2.default(function (resolve, reject) {\n\t        if (_this.limit) {\n\t          var reader = new FileReader();\n\t          reader.readAsDataURL(file);\n\t          reader.onload = function (e) {\n\t            var img = new Image();\n\t            img.src = e.target.result;\n\t            console.log(img.src);\n\t            img.onload = function (e) {\n\t              console.log(img.width, img.height);\n\t              console.log(_this.limit.width, _this.limit.height);\n\t              if (img.width <= _this.limit.width && img.height <= _this.limit.height) {\n\t                resolve(true);\n\t              } else {\n\t                _this.$emit('onSizeError', '图片尺寸不符合规范');\n\t                reject('图片尺寸不符合规范');\n\t              }\n\t            };\n\t          };\n\t        } else {\n\t          resolve(true);\n\t        }\n\t      });\n\t    },\n\t    onSuccess: function onSuccess(data) {\n\t      var _imgUrl = '' + this.qiniuImgUrl + data.key;\n\t      this.$emit('onSuccess', _imgUrl, data);\n\t    }\n\t  }\n\t};\n\n/***/ },\n\n/***/ 251:\n/***/ function(module, exports, __webpack_require__) {\n\n\texports = module.exports = __webpack_require__(3)();\n\t// imports\n\t\n\t\n\t// module\n\texports.push([module.id, \".author-edit-form[data-v-a1655eb2]{padding:40px;width:600px}\", \"\", {\"version\":3,\"sources\":[\"/./src/pages/author-edit/author-edit.scss\"],\"names\":[],\"mappings\":\"AACA,mCAAmC,aAAa,WAAW,CAC1D\",\"file\":\"author-edit.scss\",\"sourcesContent\":[\"\\n.author-edit-form[data-v-a1655eb2]{padding:40px;width:600px\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\t\n\t// exports\n\n\n/***/ },\n\n/***/ 296:\n/***/ function(module, exports, __webpack_require__) {\n\n\t// style-loader: Adds some css to the DOM by adding a <style> tag\n\t\n\t// load the styles\n\tvar content = __webpack_require__(251);\n\tif(typeof content === 'string') content = [[module.id, content, '']];\n\t// add the styles to the DOM\n\tvar update = __webpack_require__(4)(content, {});\n\tif(content.locals) module.exports = content.locals;\n\t// Hot Module Replacement\n\tif(false) {\n\t\t// When the styles change, update the <style> tags\n\t\tif(!content.locals) {\n\t\t\tmodule.hot.accept(\"!!./../../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./../../../node_modules/.6.0.0@sass-loader/lib/loader.js?sourceMap!./author-edit.scss\", function() {\n\t\t\t\tvar newContent = require(\"!!./../../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./../../../node_modules/.6.0.0@sass-loader/lib/loader.js?sourceMap!./author-edit.scss\");\n\t\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\t\tupdate(newContent);\n\t\t\t});\n\t\t}\n\t\t// When the module is disposed, remove the <style> tags\n\t\tmodule.hot.dispose(function() { update(); });\n\t}\n\n/***/ },\n\n/***/ 391:\n/***/ function(module, exports, __webpack_require__) {\n\n\t\n\t/* styles */\n\t__webpack_require__(296)\n\t\n\tvar Component = __webpack_require__(2)(\n\t  /* script */\n\t  __webpack_require__(720),\n\t  /* template */\n\t  __webpack_require__(442),\n\t  /* scopeId */\n\t  \"data-v-a1655eb2\",\n\t  /* cssModules */\n\t  null\n\t)\n\t\n\tmodule.exports = Component.exports\n\n\n/***/ },\n\n/***/ 442:\n/***/ function(module, exports) {\n\n\tmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n\t  return _c('div', {\n\t    staticClass: \"author-edit-form\"\n\t  }, [_c('el-form', {\n\t    ref: \"authorForm\",\n\t    staticClass: \"demo-authorForm\",\n\t    attrs: {\n\t      \"model\": _vm.authorForm,\n\t      \"rules\": _vm.rules,\n\t      \"label-width\": \"100px\"\n\t    }\n\t  }, [_c('el-form-item', {\n\t    attrs: {\n\t      \"label\": \"作者名称\",\n\t      \"prop\": \"e_name\"\n\t    }\n\t  }, [_c('el-input', {\n\t    directives: [{\n\t      name: \"model\",\n\t      rawName: \"v-model\",\n\t      value: (_vm.authorForm.e_name),\n\t      expression: \"authorForm.e_name\"\n\t    }],\n\t    domProps: {\n\t      \"value\": (_vm.authorForm.e_name)\n\t    },\n\t    on: {\n\t      \"input\": function($event) {\n\t        _vm.authorForm.e_name = $event\n\t      }\n\t    }\n\t  })], 1), _vm._v(\" \"), _c('el-form-item', {\n\t    attrs: {\n\t      \"label\": \"作者头像\",\n\t      \"prop\": \"e_avatar\"\n\t    }\n\t  }, [\n\t    [(_vm.authorForm.e_avatar) ? _c('div', {\n\t      staticClass: \"user-face\"\n\t    }, [_c('img', {\n\t      directives: [{\n\t        name: \"show\",\n\t        rawName: \"v-show\",\n\t        value: (_vm.authorForm.e_avatar),\n\t        expression: \"authorForm.e_avatar\"\n\t      }],\n\t      attrs: {\n\t        \"src\": _vm.authorForm.e_avatar\n\t      }\n\t    })]) : _vm._e(), _vm._v(\" \"), _c('img-uploader', {\n\t      attrs: {\n\t        \"btnText\": \"点击上传图片\",\n\t        \"token\": _vm.uptoken,\n\t        \"qnImgUrl\": _vm.domain\n\t      },\n\t      on: {\n\t        \"onSuccess\": _vm.uploadSuccess,\n\t        \"onSizeError\": _vm.sizeError\n\t      }\n\t    })]\n\t  ], 2), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n\t    attrs: {\n\t      \"type\": \"primary\"\n\t    },\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.submitForm('authorForm')\n\t      }\n\t    }\n\t  }, [_vm._v(\"提交\")]), _vm._v(\" \"), _c('el-button', {\n\t    on: {\n\t      \"click\": function($event) {\n\t        _vm.resetForm('authorForm')\n\t      }\n\t    }\n\t  }, [_vm._v(\"重置\")])], 1)], 1)], 1)\n\t},staticRenderFns: []}\n\n/***/ },\n\n/***/ 720:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _assign = __webpack_require__(64);\n\t\n\tvar _assign2 = _interopRequireDefault(_assign);\n\t\n\tvar _api = __webpack_require__(5);\n\t\n\tvar _api2 = _interopRequireDefault(_api);\n\t\n\tvar _ImgUploader = __webpack_require__(21);\n\t\n\tvar _ImgUploader2 = _interopRequireDefault(_ImgUploader);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t    data: function data() {\n\t        return {\n\t            uptoken: '',\n\t            domain: '',\n\t            uploadUrl: _api2.default.getUploadUrl(),\n\t            authorForm: {\n\t                'e_name': '',\n\t                'e_avatar': ''\n\t            },\n\t            rules: {\n\t                e_name: [{ required: true, message: '请输入通知标题', trigger: 'blur' }],\n\t                e_avatar: [{ required: true, message: '请上传头像' }]\n\t            }\n\t        };\n\t    },\n\t\n\t    components: {\n\t        'img-uploader': _ImgUploader2.default\n\t    },\n\t    mounted: function mounted() {\n\t        this.editorUpload();\n\t        this.authorId = this.$route.params['authorId'];\n\t        if (this.authorId) {\n\t            this.getPrevAuthorInfo();\n\t        }\n\t    },\n\t\n\t    methods: {\n\t        editorUpload: function editorUpload() {\n\t            var _this = this;\n\t\n\t            _api2.default.get({\n\t                'ext': 'common/resource/qiniu/config'\n\t            }).then(function (res) {\n\t                _this.uptoken = res.body.uptoken;\n\t                _this.domain = res.body.domain;\n\t            });\n\t        },\n\t        getPrevAuthorInfo: function getPrevAuthorInfo() {\n\t            var _this2 = this;\n\t\n\t            _api2.default.get({\n\t                'ext': 'editor/read',\n\t                'e_id': this.authorId\n\t            }).then(function (res) {\n\t                if (res.data.code === 1) {\n\t                    _this2.authorForm.e_avatar = res.data.data.eavatar;\n\t                    _this2.authorForm.e_name = res.data.data.ename;\n\t                    _this2.authorForm.e_type = '' + res.data.data.etype;\n\t                }\n\t            });\n\t        },\n\t        submitForm: function submitForm(formName) {\n\t            var _this3 = this;\n\t\n\t            this.$refs[formName].validate(function (valid) {\n\t                if (valid) {\n\t                    if (_this3.authorId) {\n\t                        _this3.editAuthor();\n\t                    } else {\n\t                        _this3.addAuthor();\n\t                    }\n\t                } else {\n\t                    _this3.$alert('信息填写不完整!', '提示', {\n\t                        confirmButtonText: '确定'\n\t                    }).catch(function () {});\n\t                    return false;\n\t                }\n\t            });\n\t        },\n\t        resetForm: function resetForm(formName) {\n\t            this.$refs[formName].resetFields();\n\t        },\n\t        uploadImgSucess: function uploadImgSucess(response) {\n\t            this.authorForm.e_avatar = response.url;\n\t        },\n\t        addAuthor: function addAuthor() {\n\t            var _this4 = this;\n\t\n\t            var _addData = (0, _assign2.default)(this.authorForm, {\n\t                'ext': 'editor/add'\n\t            });\n\t            _api2.default.post(_addData).then(function (res) {\n\t                if (res.data.code === 1) {\n\t                    _this4.$notify({\n\t                        'type': 'success',\n\t                        'message': '添加成功'\n\t                    });\n\t                    _this4.resetForm('authorForm');\n\t                    _this4.$router.push({});\n\t                }\n\t            });\n\t        },\n\t        editAuthor: function editAuthor() {\n\t            var _this5 = this;\n\t\n\t            var _editData = (0, _assign2.default)(this.authorForm, {\n\t                'ext': 'editor/edit',\n\t                'e_id': this.authorId\n\t            });\n\t            console.log(_editData);\n\t            _api2.default.put(_editData).then(function (res) {\n\t                if (res.data.code === 1) {\n\t                    _this5.$notify({\n\t                        'type': 'success',\n\t                        'message': '修改成功'\n\t                    });\n\t                    _this5.$router.back();\n\t                }\n\t            });\n\t        },\n\t        uploadSuccess: function uploadSuccess(data) {\n\t            this.authorForm.e_avatar = this.domain + data;\n\t            console.log(data);\n\t        },\n\t        sizeError: function sizeError(data) {\n\t            this.$alert(data, '提示', {\n\t                confirmButtonText: '确定'\n\t            }).catch(function () {});\n\t        }\n\t    }\n\t};\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/4.90c28cf73588d7d86a51.js","exports = module.exports = require(\"./../../node_modules/.0.26.1@css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".el-upload{margin-top:12px}\", \"\", {\"version\":3,\"sources\":[\"/./src/components/ImgUploader.vue\"],\"names\":[],\"mappings\":\"AACA,WACE,eAAiB,CAClB\",\"file\":\"ImgUploader.vue\",\"sourcesContent\":[\"\\n.el-upload{\\n  margin-top: 12px;\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.26.1@css-loader?sourceMap!./~/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./~/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/components/ImgUploader.vue\n// module id = 19\n// module chunks = 1 2 3 4 5 6 7","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./ImgUploader.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../node_modules/.1.0.0@vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./ImgUploader.vue\", function() {\n\t\t\tvar newContent = require(\"!!./../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./ImgUploader.vue\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.0.1@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/.1.0.0@vue-style-loader!./~/.0.26.1@css-loader?sourceMap!./~/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-ac21f8c2!./~/.10.3.0@vue-loader/lib/selector.js?type=styles&index=0!./src/components/ImgUploader.vue\n// module id = 20\n// module chunks = 1 2 3 4 5 6 7","\n/* styles */\nrequire(\"!!./../../node_modules/.1.0.1@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../node_modules/.10.3.0@vue-loader/lib/style-rewriter?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector?type=styles&index=0!./ImgUploader.vue\")\n\nvar Component = require(\"!./../../node_modules/.10.3.0@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../../node_modules/.10.3.0@vue-loader/lib/selector?type=script&index=0!./ImgUploader.vue\"),\n  /* template */\n  require(\"!!./../../node_modules/.10.3.0@vue-loader/lib/template-compiler?id=data-v-ac21f8c2!./../../node_modules/.10.3.0@vue-loader/lib/selector?type=template&index=0!./ImgUploader.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ImgUploader.vue\n// module id = 21\n// module chunks = 1 2 3 4 5 6 7","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('el-upload', {\n    attrs: {\n      \"action\": _vm.uploadUrl,\n      \"data\": _vm.uploadImgData,\n      \"name\": 'file',\n      \"on-success\": _vm.onSuccess,\n      \"before-upload\": _vm.checkData\n    }\n  }, [_c('el-button', {\n    attrs: {\n      \"size\": \"small\",\n      \"type\": \"primary\"\n    }\n  }, [_vm._v(_vm._s(_vm.btnText))])], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.10.3.0@vue-loader/lib/template-compiler.js?id=data-v-ac21f8c2!./~/.10.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/components/ImgUploader.vue\n// module id = 22\n// module chunks = 1 2 3 4 5 6 7","<template>\n  <div>\n    <el-upload :action=\"uploadUrl\" :data=\"uploadImgData\" :name=\"'file'\" :on-success=\"onSuccess\"\n    :before-upload=\"checkData\">\n      <el-button size=\"small\" type=\"primary\">{{btnText}}</el-button>\n    </el-upload>\n  </div>\n</template>\n\n<script>\n  export default {\n    data() {\n      return {\n        uploadUrl: 'http://up-z2.qiniu.com/',\n        qiniuImgUrl:this.qnImgUrl,\n        uploadImgData: {\n          token: ''\n        }\n      }\n    },\n    props: [\n      'btnText',\n      'token',\n      'limit',\n      'qnImgUrl'\n    ],\n    watch: {\n      'token': function() {\n        if (this.token && this.token !== '') {\n          this.initConfig();\n        }\n      }\n    },\n    mounted() {\n\n    },\n    methods: {\n      initConfig() {\n        this.uploadImgData = {\n          token: this.token\n        }\n      },\n      checkData(file) {\n        return new Promise((resolve, reject) => {\n          if (this.limit) {\n            var reader = new FileReader();\n            reader.readAsDataURL(file);\n            reader.onload = (e) => {\n              var img = new Image();\n              img.src = e.target.result;\n              console.log(img.src)\n              img.onload = (e) => {\n                console.log(img.width,img.height)\n                console.log(this.limit.width,this.limit.height)\n                if (img.width <= this.limit.width && img.height <= this.limit.height) {\n                  resolve(true);\n                } else {\n                  this.$emit('onSizeError','图片尺寸不符合规范');\n                  reject('图片尺寸不符合规范');\n                }\n              }\n            }\n          } else {\n            resolve(true);\n          }\n        })\n      },\n      onSuccess(data) {\n        var _imgUrl = `${this.qiniuImgUrl}${data.key}` ;\n        this.$emit('onSuccess', _imgUrl,data);\n      }\n    }\n  }\n</script>\n<style>\n  .el-upload{\n    margin-top: 12px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// ImgUploader.vue?02a2a242","exports = module.exports = require(\"./../../../node_modules/.0.26.1@css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".author-edit-form[data-v-a1655eb2]{padding:40px;width:600px}\", \"\", {\"version\":3,\"sources\":[\"/./src/pages/author-edit/author-edit.scss\"],\"names\":[],\"mappings\":\"AACA,mCAAmC,aAAa,WAAW,CAC1D\",\"file\":\"author-edit.scss\",\"sourcesContent\":[\"\\n.author-edit-form[data-v-a1655eb2]{padding:40px;width:600px\\n}\\n\"],\"sourceRoot\":\"webpack://\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.0.26.1@css-loader?sourceMap!./~/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./~/.6.0.0@sass-loader/lib/loader.js?sourceMap!./src/pages/author-edit/author-edit.scss\n// module id = 251\n// module chunks = 4","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./../../../node_modules/.6.0.0@sass-loader/lib/loader.js?sourceMap!./author-edit.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/.1.0.0@vue-style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./../../../node_modules/.6.0.0@sass-loader/lib/loader.js?sourceMap!./author-edit.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/.0.26.1@css-loader/index.js?sourceMap!./../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./../../../node_modules/.6.0.0@sass-loader/lib/loader.js?sourceMap!./author-edit.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.1.0.1@extract-text-webpack-plugin/loader.js?{\"omit\":1,\"extract\":true,\"remove\":true}!./~/.1.0.0@vue-style-loader!./~/.0.26.1@css-loader?sourceMap!./~/.10.3.0@vue-loader/lib/style-rewriter.js?id=data-v-a1655eb2&scoped=true!./~/.6.0.0@sass-loader/lib/loader.js?sourceMap!./src/pages/author-edit/author-edit.scss\n// module id = 296\n// module chunks = 4","\n/* styles */\nrequire(\"!!./../../../node_modules/.1.0.1@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../../node_modules/.10.3.0@vue-loader/lib/style-rewriter?id=data-v-a1655eb2&scoped=true!sass-loader?sourceMap!./author-edit.scss\")\n\nvar Component = require(\"!./../../../node_modules/.10.3.0@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../../../node_modules/.10.3.0@vue-loader/lib/selector?type=script&index=0!./author-edit.vue\"),\n  /* template */\n  require(\"!!./../../../node_modules/.10.3.0@vue-loader/lib/template-compiler?id=data-v-a1655eb2!./../../../node_modules/.10.3.0@vue-loader/lib/selector?type=template&index=0!./author-edit.vue\"),\n  /* scopeId */\n  \"data-v-a1655eb2\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/author-edit/author-edit.vue\n// module id = 391\n// module chunks = 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"author-edit-form\"\n  }, [_c('el-form', {\n    ref: \"authorForm\",\n    staticClass: \"demo-authorForm\",\n    attrs: {\n      \"model\": _vm.authorForm,\n      \"rules\": _vm.rules,\n      \"label-width\": \"100px\"\n    }\n  }, [_c('el-form-item', {\n    attrs: {\n      \"label\": \"作者名称\",\n      \"prop\": \"e_name\"\n    }\n  }, [_c('el-input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.authorForm.e_name),\n      expression: \"authorForm.e_name\"\n    }],\n    domProps: {\n      \"value\": (_vm.authorForm.e_name)\n    },\n    on: {\n      \"input\": function($event) {\n        _vm.authorForm.e_name = $event\n      }\n    }\n  })], 1), _vm._v(\" \"), _c('el-form-item', {\n    attrs: {\n      \"label\": \"作者头像\",\n      \"prop\": \"e_avatar\"\n    }\n  }, [\n    [(_vm.authorForm.e_avatar) ? _c('div', {\n      staticClass: \"user-face\"\n    }, [_c('img', {\n      directives: [{\n        name: \"show\",\n        rawName: \"v-show\",\n        value: (_vm.authorForm.e_avatar),\n        expression: \"authorForm.e_avatar\"\n      }],\n      attrs: {\n        \"src\": _vm.authorForm.e_avatar\n      }\n    })]) : _vm._e(), _vm._v(\" \"), _c('img-uploader', {\n      attrs: {\n        \"btnText\": \"点击上传图片\",\n        \"token\": _vm.uptoken,\n        \"qnImgUrl\": _vm.domain\n      },\n      on: {\n        \"onSuccess\": _vm.uploadSuccess,\n        \"onSizeError\": _vm.sizeError\n      }\n    })]\n  ], 2), _vm._v(\" \"), _c('el-form-item', [_c('el-button', {\n    attrs: {\n      \"type\": \"primary\"\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.submitForm('authorForm')\n      }\n    }\n  }, [_vm._v(\"提交\")]), _vm._v(\" \"), _c('el-button', {\n    on: {\n      \"click\": function($event) {\n        _vm.resetForm('authorForm')\n      }\n    }\n  }, [_vm._v(\"重置\")])], 1)], 1)], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.10.3.0@vue-loader/lib/template-compiler.js?id=data-v-a1655eb2!./~/.10.3.0@vue-loader/lib/selector.js?type=template&index=0!./src/pages/author-edit/author-edit.vue\n// module id = 442\n// module chunks = 4","<template>\n    <div class=\"author-edit-form\">\n        <el-form :model=\"authorForm\" :rules=\"rules\" ref=\"authorForm\" label-width=\"100px\" class=\"demo-authorForm\">\n            <el-form-item label=\"作者名称\" prop=\"e_name\">\n                <el-input v-model=\"authorForm.e_name\"></el-input>\n            </el-form-item>\n            <!--<el-form-item label=\"作者类型\" prop=\"e_type\">\n                <el-select v-model=\"authorForm.e_type\" placeholder=\"请选择作者\">\n                    <el-option label=\"资讯作者\" value=\"1\"></el-option>\n                    <el-option label=\"通知作者\" value=\"2\"></el-option>\n                </el-select>\n            </el-form-item>-->\n            <el-form-item label=\"作者头像\" prop=\"e_avatar\">\n                <template>\n                     <div class=\"user-face\" v-if=\"authorForm.e_avatar\">\n                        <img v-show=\"authorForm.e_avatar\" :src=\"authorForm.e_avatar\"/>\n                    </div>\n                    <img-uploader btnText=\"点击上传图片\" :token=\"uptoken\" :qnImgUrl=\"domain\" @onSuccess=\"uploadSuccess\" @onSizeError=\"sizeError\"></img-uploader>\n\n                    <!--<span class=\"tip\">请上传尺寸为750px*420px的轮播图</span>-->\n                </template>\n            </el-form-item>\n            <el-form-item>\n                <el-button type=\"primary\" @click=\"submitForm('authorForm')\">提交</el-button>\n                <el-button @click=\"resetForm('authorForm')\">重置</el-button>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n<script>\n    import ApiService from 'SERVICES/api.service';\n    import ImgUploader from 'COMPONENTS/ImgUploader'\n    export default {\n        data() {\n            return {\n                uptoken: '',\n                domain: '',\n                uploadUrl: ApiService.getUploadUrl(),\n                authorForm: {\n                    'e_name': '',\n                    'e_avatar': '',\n                    // 'e_type': '1'\n                },\n                rules: {\n                    e_name: [\n                        { required: true, message: '请输入通知标题', trigger: 'blur' },\n                    ],\n                    e_avatar: [\n                        { required: true, message: '请上传头像' },\n                    ],\n                },\n            }\n        },\n        components: {\n            'img-uploader': ImgUploader\n        },\n        mounted() {\n            this.editorUpload();\n            this.authorId = this.$route.params['authorId'];\n            if (this.authorId) {\n                this.getPrevAuthorInfo();\n            }\n        },\n        methods: {\n             editorUpload: function () {\n                ApiService.get({\n                    'ext': 'common/resource/qiniu/config'\n                }).then(res => {\n                    this.uptoken = res.body.uptoken;\n                    this.domain = res.body.domain;\n                })\n            },\n            getPrevAuthorInfo() {\n                ApiService.get({\n                    'ext': 'editor/read',\n                    'e_id': this.authorId\n                })\n                    .then(res => {\n                        if (res.data.code === 1) {\n                            this.authorForm.e_avatar = res.data.data.eavatar;\n                            this.authorForm.e_name = res.data.data.ename;\n                            this.authorForm.e_type = `${res.data.data.etype}`;\n                        }\n                    })\n            },\n            submitForm(formName) {\n                this.$refs[formName].validate((valid) => {\n                    if (valid) {\n                        if (this.authorId) {\n                            this.editAuthor();\n                        }\n                        else {\n                            this.addAuthor();\n                        }\n                    } else {\n                        this.$alert('信息填写不完整!', '提示', {\n                            confirmButtonText: '确定'\n                        }).catch(() => { })\n                        return false;\n                    }\n                });\n            },\n            resetForm(formName) {\n                this.$refs[formName].resetFields();\n            },\n            uploadImgSucess(response) {\n                this.authorForm.e_avatar = response.url;\n            },\n            addAuthor() {\n                let _addData = Object.assign(this.authorForm, {\n                    'ext': 'editor/add'\n                })\n                ApiService.post(_addData)\n                    .then(res => {\n                        if (res.data.code === 1) {\n                            this.$notify({\n                                'type': 'success',\n                                'message': '添加成功'\n                            });\n                            this.resetForm('authorForm');\n                            this.$router.push({});\n                        }\n                    })\n            },\n            editAuthor() {\n                let _editData = Object.assign(this.authorForm, {\n                    'ext': 'editor/edit',\n                    'e_id': this.authorId\n                });\n                console.log(_editData)\n                ApiService.put(_editData)\n                    .then(res => {\n                        if (res.data.code === 1) {\n                            this.$notify({\n                                'type': 'success',\n                                'message': '修改成功'\n                            });\n                            this.$router.back();\n                        }\n                    })\n            },\n            uploadSuccess(data) {\n                this.authorForm.e_avatar = this.domain + data;\n                console.log(data);\n            },\n            sizeError(data) {\n                this.$alert(data, '提示', {\n                    confirmButtonText: '确定'\n                }).catch(() => { })\n            }\n        }\n    }\n\n</script>\n<style lang=\"scss\" src=\"./author-edit.scss\" scoped></style>\n\n\n// WEBPACK FOOTER //\n// author-edit.vue?cf7c7ebe"],"sourceRoot":""}