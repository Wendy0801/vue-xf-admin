webpackJsonp([19,48],{248:function(t,e,a){e=t.exports=a(3)(),e.push([t.id,".el-form-item img{width:200px}","",{version:3,sources:["/./src/pages.guo/advert/advert.vue"],names:[],mappings:"AACA,kBACI,WAAa,CAChB",file:"advert.vue",sourcesContent:["\n.el-form-item img {\n    width: 200px;\n}\n"],sourceRoot:"webpack://"}])},292:function(t,e,a){var n=a(248);"string"==typeof n&&(n=[[t.id,n,""]]);a(4)(n,{});n.locals&&(t.exports=n.locals)},359:function(t,e,a){a(292);var n=a(2)(a(688),a(434),null,null);t.exports=n.exports},434:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("el-input",{directives:[{name:"model",rawName:"v-model",value:t.ba_name,expression:"ba_name"}],attrs:{placeholder:"广告banner标题"},domProps:{value:t.ba_name},on:{change:t.allList,input:function(e){t.ba_name=e}}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.getAvertList}},[t._v("查询")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.advertAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.advertList,stripe:""},on:{"selection-change":t.batchSelect}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:"序号"},scopedSlots:{default:function(e){return[t._v("\n                    "+t._s(e.$index+1+(t.pageNum-1)*t.pSize)+"\n                ")]}}}),t._v(" "),a("el-table-column",{attrs:{label:"banner标题",prop:"baName"}}),t._v(" "),a("el-table-column",{attrs:{label:"缩略图"},scopedSlots:{default:function(e){return[a("img",{staticClass:"preview-img",attrs:{src:e.row.baImage,alt:""},on:{click:function(a){t.showPreview(e.$index)}}})]}}}),t._v(" "),a("el-table-column",{attrs:{label:"URL",prop:"baUrl"}}),t._v(" "),a("el-table-column",{attrs:{label:"参数",prop:"baParams"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:{default:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){t.advertEdit(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){t.advertDel(e.row.baId)}}},[t._v("删除")])]}}})],1)],t._v(" "),a("el-col",{staticClass:"toolbar",attrs:{span:24}},[a("el-button",{attrs:{type:"primary"},on:{click:t.batchDel}},[t._v("批量删除")]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pageNum,"page-size":t.pSize,layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.advertCurrentChange}})],1)],2)},staticRenderFns:[]}},688:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(5),r=n(i);e.default={name:"advert",data:function(){return{advertList:[],avertId:[],imgList:[],ba_name:"",listLoading:!1,pageNum:1,pSize:10,total:0}},mounted:function(){this.getAvertList()},methods:{getAvertList:function(){var t=this;r.default.post({ext:"banners/page",pageNum:this.pageNum,pageSize:this.pSize,ba_name:this.ba_name}).then(function(e){t.advertList=e.data.data.list,t.total=e.data.data.total,t.listLoading=!1,t.advertList.map(function(e){t.imgList.push(e.baImage)})})},allList:function(){this.ba_name||this.getAvertList()},advertAdd:function(){this.$router.push({path:"/advertEdit"})},advertEdit:function(t){this.$router.push({path:"/advertEdit/"+t.baId})},advertDel:function(t){var e=this;console.log(t),this.$confirm("您确定要删除广告banner?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){r.default.post({ext:"banners/delete",ids:t}).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success"}),e.listLoading=!0,e.getAvertList()})}).catch(function(){})},batchSelect:function(t){this.avertId=[];for(var e=0;e<t.length;e++)this.avertId.push(t[e].baId)},batchDel:function(){var t=this.avertId.join(",");this.advertDel(t)},editCancel:function(){this.editFormVisible=!1,this.$refs.editForm.resetFields()},advertCurrentChange:function(t){this.pageNum=t,this.getAvertList()},showPreview:function(t){function e(){r.$preview.open(t,n)}var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.imgList,n=[],i=0,r=this;a.map(function(t,r){var o=new Image;o.src=t,o.onload=function(){i++,n.push({src:t,w:o.width,h:o.height}),i===a.length&&e()},o.onerror=function(){i++,n.splice(r,0,{src:"/static/images/default1.jpg",w:100,h:100}),i===a.length&&e()}})}}}}});
//# sourceMappingURL=19.4edb143874cc040fd412.js.map