webpackJsonp([5,48],{19:function(e,t,i){t=e.exports=i(3)(),t.push([e.id,".el-upload{margin-top:12px}","",{version:3,sources:["/./src/components/ImgUploader.vue"],names:[],mappings:"AACA,WACE,eAAiB,CAClB",file:"ImgUploader.vue",sourcesContent:["\n.el-upload{\n  margin-top: 12px;\n}\n"],sourceRoot:"webpack://"}])},20:function(e,t,i){var r=i(19);"string"==typeof r&&(r=[[e.id,r,""]]);i(4)(r,{});r.locals&&(e.exports=r.locals)},21:function(e,t,i){i(20);var r=i(2)(i(28),i(22),null,null);e.exports=r.exports},22:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-upload",{attrs:{action:e.uploadUrl,data:e.uploadImgData,name:"file","on-success":e.onSuccess,"before-upload":e.checkData}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v(e._s(e.btnText))])],1)],1)},staticRenderFns:[]}},28:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(36),a=r(s);t.default={data:function(){return{uploadUrl:"http://up-z2.qiniu.com/",qiniuImgUrl:this.qnImgUrl,uploadImgData:{token:""}}},props:["btnText","token","limit","qnImgUrl"],watch:{token:function(){this.token&&""!==this.token&&this.initConfig()}},mounted:function(){},methods:{initConfig:function(){this.uploadImgData={token:this.token}},checkData:function(e){var t=this;return new a.default(function(i,r){if(t.limit){var s=new FileReader;s.readAsDataURL(e),s.onload=function(e){var s=new Image;s.src=e.target.result,console.log(s.src),s.onload=function(e){console.log(s.width,s.height),console.log(t.limit.width,t.limit.height),s.width<=t.limit.width&&s.height<=t.limit.height?i(!0):(t.$emit("onSizeError","图片尺寸不符合规范"),r("图片尺寸不符合规范"))}}}else i(!0)})},onSuccess:function(e){var t=""+this.qiniuImgUrl+e.key;this.$emit("onSuccess",t,e)}}}},247:function(e,t,i){t=e.exports=i(3)(),t.push([e.id,".banner-edit-container{padding:50px 12px}.dialog-footer{float:right}.el-form-item img{width:200px}.el-form-item .tip{color:#999}","",{version:3,sources:["/./src/pages.guo/banner/bannerEdit.vue"],names:[],mappings:"AACA,uBACI,iBAAmB,CACtB,AACD,eACI,WAAa,CAChB,AACD,kBACI,WAAa,CAChB,AACD,mBACI,UAAY,CACf",file:"bannerEdit.vue",sourcesContent:["\n.banner-edit-container {\n    padding: 50px 12px;\n}\n.dialog-footer {\n    float: right;\n}\n.el-form-item img {\n    width: 200px;\n}\n.el-form-item .tip {\n    color: #999;\n}\n"],sourceRoot:"webpack://"}])},291:function(e,t,i){var r=i(247);"string"==typeof r&&(r=[[e.id,r,""]]);i(4)(r,{});r.locals&&(e.exports=r.locals)},361:function(e,t,i){i(291);var r=i(2)(i(690),i(433),null,null);e.exports=r.exports},433:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"banner-edit-container"},[i("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"125px",rules:e.editFormRules}},[i("el-form-item",{attrs:{label:"名称",prop:"title"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.title,expression:"editForm.title"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.title},on:{input:function(t){e.editForm.title=t}}})],1),e._v(" "),i("el-form-item",{attrs:{label:"轮播类型",prop:"busi_type"}},[i("el-select",{directives:[{name:"model",rawName:"v-model",value:e.editForm.busi_type,expression:"editForm.busi_type"}],attrs:{placeholder:"请选择轮播类型"},domProps:{value:e.editForm.busi_type},on:{change:function(t){e.changeType(e.editForm.busi_type)},input:function(t){e.editForm.busi_type=t}}},e._l(e.busiType,function(e){return i("el-option",{attrs:{label:e.name,value:e.value}})}))],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editForm.busi_type,expression:"editForm.busi_type==1"}],attrs:{label:"广告类型",prop:"ba_admaster_type"}},[i("el-radio-group",{directives:[{name:"model",rawName:"v-model",value:e.editForm.ba_admaster_type,expression:"editForm.ba_admaster_type"}],domProps:{value:e.editForm.ba_admaster_type},on:{change:function(t){e.changeAdmasterType(e.editForm.ba_admaster_type)},input:function(t){e.editForm.ba_admaster_type=t}}},[i("el-radio",{attrs:{label:0}},[e._v("正常")]),e._v(" "),i("el-radio",{attrs:{label:1}},[e._v("秒针")]),e._v(" "),i("el-radio",{attrs:{label:2}},[e._v("AdMaster")])],1)],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editForm.busi_type&&0==!e.editForm.ba_admaster_type,expression:"editForm.busi_type==1 && !editForm.ba_admaster_type==0"}],attrs:{label:"曝光地址",prop:"ba_expousre_address"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.ba_expousre_address,expression:"editForm.ba_expousre_address"}],domProps:{value:e.editForm.ba_expousre_address},on:{input:function(t){e.editForm.ba_expousre_address=t}}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.editForm.busi_type,expression:"editForm.busi_type==1"}],attrs:{label:"url",prop:"url",id:"url"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.url,expression:"editForm.url"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.url},on:{change:e.preview,input:function(t){e.editForm.url=t}}}),e._v(" "),i("span",{staticClass:"tip"},[e._v("请务必复制正确的资讯id,否则可能出现报错异常,地址如下:")]),i("br"),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.loadNews}},[e._v("1.资讯管理-资讯管理列表中")])],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.editForm.busi_type,expression:"editForm.busi_type==2"}],attrs:{label:"选手ID",prop:"busi_type_id",id:"userid"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.busi_type_id,expression:"editForm.busi_type_id"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.busi_type_id},on:{input:function(t){e.editForm.busi_type_id=t}}}),e._v(" "),i("span",{staticClass:"tip"},[e._v("请务必复制正确的选手ID,否则可能出现报错异常,地址如下:")]),i("br"),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.loadSignUser}},[e._v("1.活动管理-第二季选秀管理-报名用户")]),e._v(" "),i("br"),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.loadUser}},[e._v("2.系统后台-用户账号管理")])],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3==e.editForm.busi_type,expression:"editForm.busi_type==3"}],attrs:{label:"活动ID",prop:"busi_type_id",id:"activeid"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.busi_type_id,expression:"editForm.busi_type_id"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.busi_type_id},on:{input:function(t){e.editForm.busi_type_id=t}}}),e._v(" "),i("span",{staticClass:"tip"},[e._v("请务必复制正确的活动ID,否则可能出现报错异常,地址如下:")]),e._v(" "),i("br"),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.loadActivity}},[e._v("活动管理-活动管理列表中")])],1),e._v(" "),i("el-form-item",{attrs:{prop:"imageUrl"}},[i("img",{directives:[{name:"show",rawName:"v-show",value:e.editForm.imageUrl,expression:"editForm.imageUrl"}],attrs:{src:e.editForm.imageUrl,alt:""}}),e._v(" "),i("img-uploader",{attrs:{btnText:"上传图片",token:e.uptoken,qnImgUrl:e.domain,limit:e.limitData},on:{onSuccess:e.uploadSuccess,onSizeError:e.sizeError}}),e._v(" "),i("span",{staticClass:"tip"},[e._v("请上传尺寸为750px*420px的轮播图")])],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.editSubmit}},[e._v(e._s(e.btnEditText))])],1)],1)},staticRenderFns:[]}},690:function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(5),a=r(s),o=i(21),d=r(o);t.default={data:function(){return{uptoken:"",domain:"",limitData:{width:750,height:420},busiType:[{name:"外链[资讯/通知/默认]",value:1},{name:"选手主页",value:2},{name:"活动主页",value:3}],editForm:{id:"",title:this.$store.state.bannerTitle,busi_type:this.$store.state.bannerType,ba_admaster_type:this.$store.state.bannerAdmasterType,ba_expousre_address:this.$store.state.bannerExpousreAddress,url:"",busi_type_id:"",imageUrl:""},btnEditText:"提 交",editFormRules:{title:[{required:!0,message:"请输入轮播图标题",trigger:"blur"}],busi_type:[{required:!0,message:"请输入选择轮播类型"}],ba_admaster_type:[{required:!0,message:"请输入选择广告类型"}],url:[{required:!0,message:"请输入输入url",trigger:"blur"}],ba_expousre_address:[{required:!0,message:"请输入输入曝光地址",trigger:"blur"}],busi_type_id:[{required:!0,message:"请输入非外链设置ID",trigger:"blur"}],imageUrl:[{required:!0,message:"请输入上传轮播图"}]}}},components:{"img-uploader":d.default},mounted:function(){var e;e=this.editForm.id=this.$route.params.bannerId,e?this.bannerEdit(e):(this.editForm.id="",this.changeType(this.$store.state.bannerType)),this.editorUpload()},methods:{editorUpload:function(){var e=this;a.default.get({ext:"common/resource/qiniu/config"}).then(function(t){e.uptoken=t.body.uptoken,e.domain=t.body.domain})},saveValue:function(){this.$store.commit("SETBANNERTITLE",this.editForm.title),this.$store.commit("SETBANNERTYPE",this.editForm.busi_type),this.$store.commit("SETBANNERADMASTERTYPE",this.editForm.ba_admaster_type),this.$store.commit("SETBANNEREXPOUSREADDRESS",this.editForm.ba_expousre_address)},bannerEdit:function(e){var t=this;a.default.get({ext:"homepage/carouse/read",id:e}).then(function(e){t.editForm.id=e.data.data.caroId,t.editForm.title=e.data.data.caroDesc,t.editForm.busi_type=e.data.data.caroType,t.editForm.ba_admaster_type=e.data.data.baAdmasterType,t.editForm.ba_expousre_address=e.data.data.baExpousreAddress,e.data.data.caroUrl?t.editForm.url=e.data.data.caroUrl:t.editForm.url="",t.editForm.busi_type_id=e.data.data.caroTypeId,t.editForm.imageUrl=e.data.data.caroCover,t.changeType(e.data.data.caroType),t.changeAdmasterType(e.data.data.baAdmasterType)})},changeType:function(e){1==e?(this.editFormRules.busi_type_id=[],this.editFormRules.url=[{required:!0,message:"请输入输入url",trigger:"blur"}],this.editFormRules.ba_admaster_type=[{required:!0,message:"请输入选择广告类型"}],this.editFormRules.busi_type_id=""):2==e?(this.editFormRules.url=[],this.editFormRules.ba_admaster_type=[],this.editFormRules.ba_expousre_address=[],this.editFormRules.busi_type_id=[{required:!0,message:"请输入非外链设置ID",trigger:"blur"}],this.editForm={id:this.editForm.id,title:this.editForm.title,busi_type:this.editForm.busi_type,ba_admaster_type:"",ba_expousre_address:"",url:"",busi_type_id:this.editForm.busi_type_id,imageUrl:this.editForm.imageUrl}):3==e&&(this.editFormRules.url=[],this.editFormRules.ba_admaster_type=[],this.editFormRules.ba_expousre_address=[],this.editFormRules.busi_type_id=[{required:!0,message:"请输入非外链设置ID",trigger:"blur"}],this.editForm={id:this.editForm.id,title:this.editForm.title,busi_type:this.editForm.busi_type,ba_admaster_type:"",ba_expousre_address:"",url:"",busi_type_id:this.editForm.busi_type_id,imageUrl:this.editForm.imageUrl})},changeAdmasterType:function(e){0==e?(this.editFormRules.ba_expousre_address=[],this.editForm.ba_expousre_address=""):this.editFormRules.ba_expousre_address=[{required:!0,message:"请输入输入曝光地址",trigger:"blur"}]},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){return t?void(""==e.editForm.id?a.default.post({ext:"homepage/carouse/add",title:e.editForm.title,busi_type:e.editForm.busi_type,ba_admaster_type:e.editForm.ba_admaster_type,ba_expousre_address:e.editForm.ba_expousre_address,url:e.editForm.url,busi_type_id:e.editForm.busi_type_id,imageUrl:e.editForm.imageUrl}).then(function(t){e.editFormVisible=!1,e.listLoading=!0,e.$notify({title:"成功",message:"提交成功",type:"success"}),e.$router.push({path:"/bannerList"})}):a.default.post({ext:"homepage/carouse/edit",id:e.editForm.id,title:e.editForm.title,busi_type:e.editForm.busi_type,ba_admaster_type:e.editForm.ba_admaster_type,ba_expousre_address:e.editForm.ba_expousre_address,url:e.editForm.url,busi_type_id:e.editForm.busi_type_id,imageUrl:e.editForm.imageUrl}).then(function(t){e.editFormVisible=!1,e.listLoading=!0,e.$notify({title:"成功",message:"提交成功",type:"success"}),e.$router.push({path:"/bannerList"})})):(e.$alert("信息填写不完整!","提示",{confirmButtonText:"确定"}).catch(function(){}),!1)})},loadSignUser:function(){this.saveValue(),this.$router.push({path:"/signUpList"})},loadUser:function(){this.saveValue(),this.$router.push({path:"/user-list"})},loadActivity:function(){this.saveValue(),this.$router.push({path:"/activityList"})},loadNews:function(){this.saveValue(),this.$router.push({path:"/newsList"})},preview:function(){},uploadSuccess:function(e){this.editForm.imageUrl=this.domain+e,console.log(e)},sizeError:function(e){this.$alert(e,"提示",{confirmButtonText:"确定"}).catch(function(){})}}}}});
//# sourceMappingURL=5.4b5a702865b07bc7bc2a.js.map