webpackJsonp([27,48],{237:function(t,e,i){e=t.exports=i(3)(),e.push([t.id,".el-dialog__wrapper img{width:200px}","",{version:3,sources:["/./src/pages.guo/newsList/newsList.vue"],names:[],mappings:"AACA,wBACI,WAAa,CAChB",file:"newsList.vue",sourcesContent:["\n.el-dialog__wrapper img {\n    width: 200px;\n}\n"],sourceRoot:"webpack://"}])},281:function(t,e,i){var o=i(237);"string"==typeof o&&(o=[[t.id,o,""]]);i(4)(o,{});o.locals&&(t.exports=o.locals)},374:function(t,e,i){i(281);var o=i(2)(i(703),i(421),null,null);t.exports=o.exports},421:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{placeholder:"输入文章标题"},domProps:{value:t.name},on:{change:t.allList,input:function(e){t.name=e}}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.getNewsList}},[t._v("查询")])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.newsAdd}},[t._v("新增")])],1)],1)],1),t._v(" "),[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.newsList,stripe:""},on:{"selection-change":t.batchSelect}},[i("el-table-column",{attrs:{type:"selection"}}),t._v(" "),i("el-table-column",{attrs:{prop:"sequenceNumber",width:"100",label:"序号"}}),t._v(" "),i("el-table-column",{attrs:{label:"文章标题",prop:"infoTitle"},scopedSlots:{default:function(e){return[i("div",{attrs:{title:e.row.infoTitle}},[t._v(t._s(e.row.infoTitle))])]}}}),t._v(" "),i("el-table-column",{attrs:{label:"资讯Id",prop:"infoId"}}),t._v(" "),i("el-table-column",{attrs:{label:"文章分类",prop:"infoType"},scopedSlots:{default:function(e){return[i("span",[t._v(t._s(1===e.row.infoType?"娱乐":"时尚"))])]}}}),t._v(" "),i("el-table-column",{attrs:{label:"文章标签",prop:"infoLableName"}}),t._v(" "),i("el-table-column",{attrs:{label:"是否显示",prop:"ihDisplay"},scopedSlots:{default:function(e){return[i("span",[t._v(t._s(0===e.row.ihDisplay?"否":"是"))])]}}}),t._v(" "),i("el-table-column",{attrs:{label:"排序管理"},scopedSlots:{default:function(e){return[i("el-input",{directives:[{name:"model",rawName:"v-model",value:t.sortNum,expression:"sortNum"}],attrs:{value:e.row.infoSort},domProps:{value:t.sortNum},on:{focus:function(i){t.changeSort(e.row)},input:function(e){t.sortNum=e}}})]}}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:{default:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){t.newsEdit(e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){t.newsDel(e.row)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){t.newPush(e.row.infoId)}}},[t._v("推送")])]}}})],1)],t._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-button",{attrs:{type:"primary"},on:{click:t.batchDel}},[t._v("批量删除")]),t._v(" "),i("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,prev, pager, next,jumper",total:t.total},on:{"current-change":t.newsCurrentChange}})],1),t._v(" "),i("el-dialog",{directives:[{name:"model",rawName:"v-model",value:t.editDialog,expression:"editDialog"}],attrs:{title:"推送"},domProps:{value:t.editDialog},on:{close:function(e){t.editCancel("editDialog")},input:function(e){t.editDialog=e}}},[i("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"120px",rules:t.editFormRules}},[i("el-form-item",{attrs:{label:"推送内容标题",prop:"title"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.title,expression:"editForm.title"}],attrs:{placeholder:"请输入推送内容标题"},domProps:{value:t.editForm.title},on:{input:function(e){t.editForm.title=e}}})],1),t._v(" "),i("el-form-item",{attrs:{label:"消息文本",prop:"text"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.text,expression:"editForm.text"}],attrs:{placeholder:"请输入推送内容标题"},domProps:{value:t.editForm.text},on:{input:function(e){t.editForm.text=e}}})],1),t._v(" "),i("el-form-item",{attrs:{label:"消息类型",prop:"type"}},[i("el-radio-group",{directives:[{name:"model",rawName:"v-model",value:t.editForm.type,expression:"editForm.type"}],domProps:{value:t.editForm.type},on:{input:function(e){t.editForm.type=e}}},[i("el-radio",{attrs:{label:1}},[t._v("资讯")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("通知")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"消息ID",prop:"msgId"}},[i("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.msgId,expression:"editForm.msgId"}],attrs:{placeholder:"请输入推送内容标题"},domProps:{value:t.editForm.msgId},on:{input:function(e){t.editForm.msgId=e}}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(e){t.editCancel("editDialog")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.pushAdd}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{directives:[{name:"model",rawName:"v-model",value:t.pushDialog,expression:"pushDialog"}],attrs:{title:"推送"},domProps:{value:t.pushDialog},on:{close:function(e){t.editCancel("pushDialog")},input:function(e){t.pushDialog=e}}},[i("el-form",{ref:"editFormPush",attrs:{model:t.editFormPush,"label-width":"120px",rules:t.editFormPushRules}},[i("el-form-item",{attrs:{label:"推送时间",prop:"startTime"}},[i("el-date-picker",{directives:[{name:"model",rawName:"v-model",value:t.editFormPush.startTime,expression:"editFormPush.startTime"}],attrs:{type:"datetime",placeholder:"请选择推送时间",format:"yyyy-MM-dd HH:mm:ss"},domProps:{value:t.editFormPush.startTime},on:{change:t.startDateFormat,input:function(e){t.editFormPush.startTime=e}}})],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",slot:"footer"},[i("el-button",{on:{click:function(e){t.editCancel("pushDialog")}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.pushSubmit}},[t._v("确 定")])],1)],1)],2)},staticRenderFns:[]}},703:function(t,e,i){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=i(5),s=o(n);e.default={name:"news",data:function(){return{name:"",sortNum:"",newsList:[],labelList:[],editerList:[],newsId:[],pageSize:10,pageNum:1,total:0,myEditor:{},listLoading:!0,uploadUrl:s.default.getUploadUrl(),btnEditText:"确定",editDialog:!1,pushDialog:!1,editForm:{title:"",text:"",type:"",msgId:""},editFormPush:{id:"",startTime:""},editFormRules:{title:[{required:!0,message:"请输入推送标题"}],text:[{required:!0,message:"请输入推送消息文本"}],type:[{required:!0,message:"请选择类型"}],msgId:[{required:!0,message:"请输入消息ID"}]},editFormPushRules:{startTime:[{required:!0,message:"请选择推送时间"}]}}},mounted:function(){this.getNewsList()},methods:{getNewsList:function(){var t=this;s.default.post({ext:"information/manage/page",pageNum:this.pageNum,pageSize:this.pageSize,keyword:this.name}).then(function(e){t.newsList=e.data.data.list,t.total=e.data.data.total,t.listLoading=!1})},allList:function(){this.name||this.getNewsList()},newsAdd:function(){this.$router.push({path:"/newsAdd"})},newsEdit:function(t){this.$router.push({path:"/newsEdit/"+t.infoId})},newsDel:function(t){var e=this;1==t.infoHomepage?this.$alert("您删除的资讯已设置为主页资讯,无法删除","提示",{confirmButtonText:"确定"}).catch(function(){}):this.$confirm("您确定要删除该资讯?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){s.default.post({ext:"information/manage/delete",ids:t.infoId}).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success"}),e.listLoading=!0,e.getNewsList()})}).catch(function(){})},changeSort:function(t){var e=this;this.$prompt("请输入序号","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(i){var o=i.value;return o?void s.default.post({ext:"information/manage/state",ids:t.infoId,order:o}).then(function(t){e.$notify({title:"成功",message:"操作成功",type:"success"}),e.listLoading=!0,e.getNewsList()}):(e.$alert("序列号不能为空","提示",{confirmButtonText:"确定"}).then(function(){}).catch(function(){}),!1)}).catch(function(){})},batchSelect:function(t){this.newsId=[];for(var e=0;e<t.length;e++)this.newsId.push(t[e].infoId)},batchDel:function(){var t=this;if(this.newsId.length>0){var e=this.newsId.join(",");this.$confirm("您确定要删除该资讯?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){s.default.post({ext:"information/manage/delete",ids:e}).then(function(e){t.$notify({title:"成功",message:"删除成功",type:"success"}),t.listLoading=!0,t.getNewsList()})}).catch(function(){})}else this.$confirm("请勾选您需要删除的资讯","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).catch(function(){})},newsCurrentChange:function(t){this.pageNum=t,this.getNewsList()},newPush:function(t){this.editDialog=!0,this.editForm={title:"",text:"",type:1,msgId:t}},pushAdd:function(){var t=this;this.$refs.editForm.validate(function(e){e&&s.default.post({ext:"push/message/initPushMsg",title:t.editForm.title,text:t.editForm.text,type:t.editForm.type,msgId:t.editForm.msgId}).then(function(e){1==e.data.code&&t.$confirm("新增资讯推送文本成功，是否推送？","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.editDialog=!1,t.editFormPush.id=e.data.data,t.pushDialog=!0}).catch(function(){t.editDialog=!1})})})},pushSubmit:function(){var t=this;this.$refs.editFormPush.validate(function(e){e&&s.default.post({ext:"push/message/setStartTime",id:t.editFormPush.id,startTime:t.editFormPush.startTime}).then(function(e){t.$notify({title:"提示",message:"推送成功",type:"success"}),t.pushDialog=!1,t.$router.push({path:"/pushList"})})})},editCancel:function(t){"editDialog"==t?(this.editDialog=!1,this.$refs.editForm.resetFields()):(this.pushDialog=!1,this.$refs.editFormPush.resetFields())},startDateFormat:function(t){this.editFormPush.startTime=t}}}}});
//# sourceMappingURL=27.1be1b7b102206ab1591c.js.map