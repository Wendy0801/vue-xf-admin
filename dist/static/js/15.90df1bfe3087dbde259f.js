webpackJsonp([15,48],{255:function(t,e,o){e=t.exports=o(3)(),e.push([t.id,".notice-add-container[data-v-dcc12ce6]{padding:40px}.notice-add-inner[data-v-dcc12ce6]{width:80%}","",{version:3,sources:["/./src/pages/add-notice/add-notice.scss"],names:[],mappings:"AACA,uCAAuC,YAAY,CAClD,AACD,mCAAmC,SAAS,CAC3C",file:"add-notice.scss",sourcesContent:["\n.notice-add-container[data-v-dcc12ce6]{padding:40px\n}\n.notice-add-inner[data-v-dcc12ce6]{width:80%\n}\n"],sourceRoot:"webpack://"}])},301:function(t,e,o){var n=o(255);"string"==typeof n&&(n=[[t.id,n,""]]);o(4)(n,{});n.locals&&(t.exports=n.locals)},390:function(t,e,o){o(301);var n=o(2)(o(719),o(448),"data-v-dcc12ce6",null);t.exports=n.exports},448:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"notice-add-container"},[o("div",{staticClass:"notice-add-inner"},[o("el-form",{ref:"noticeForm",staticClass:"demo-noticeForm",attrs:{model:t.noticeForm,rules:t.rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"通知标题",prop:"noti_title"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.noticeForm.noti_title,expression:"noticeForm.noti_title"}],attrs:{maxlength:30},domProps:{value:t.noticeForm.noti_title},on:{input:function(e){t.noticeForm.noti_title=e}}})],1),t._v(" "),o("el-form-item",{attrs:{label:"作者",prop:"noti_userid"}},[o("el-select",{directives:[{name:"model",rawName:"v-model",value:t.noticeForm.noti_userid,expression:"noticeForm.noti_userid"}],attrs:{placeholder:"请选择作者"},domProps:{value:t.noticeForm.noti_userid},on:{input:function(e){t.noticeForm.noti_userid=e}}},t._l(t.authorList,function(t){return o("el-option",{attrs:{label:t.ename,value:t.eid}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"外部URL",prop:"noti_url"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.noticeForm.noti_url,expression:"noticeForm.noti_url"}],attrs:{placeholder:"填写URL后,该文章链接会直接跳转倒对应的URL"},domProps:{value:t.noticeForm.noti_url},on:{input:function(e){t.noticeForm.noti_url=e}}})],1),t._v(" "),o("el-form-item",{attrs:{label:"内容编辑",prop:"content"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.noticeForm.content,expression:"noticeForm.content"}],attrs:{type:"textarea"},domProps:{value:t.noticeForm.content},on:{input:function(e){t.noticeForm.content=e}}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("noticeForm")}}},[t._v("立即创建")]),t._v(" "),o("el-button",{on:{click:function(e){t.resetForm("noticeForm")}}},[t._v("重置")])],1)],1)],1)])},staticRenderFns:[]}},719:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=o(36),r=n(i),a=o(64),s=n(a),c=o(5),d=n(c);e.default={data:function(){return{noticeId:null,prevNoticeInfo:{},isPushNow:!1,noticeForm:{noti_title:"",content:"",noti_userid:"",noti_url:""},rules:{noti_title:[{required:!0,message:"请输入通知标题",trigger:"blur"}],noti_userid:[{required:!0,message:"请选择作者"}],noti_url:[{required:!0,message:"请输入外部Url",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]},authorList:[]}},mounted:function(){this.noticeId=this.$route.params.noticeId,this.noticeId&&this.getPrevNoticeInfo(),this.getAuthorList()},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){return t?void(e.noticeId?e.editNotice():e.addNotice()):(e.$alert("信息填写不完整!","提示",{confirmButtonText:"确定"}).catch(function(){}),!1)})},resetForm:function(t){this.$refs[t].resetFields()},getPrevNoticeInfo:function(){var t=this;d.default.get({ext:"system/notice/read",noti_id:this.noticeId}).then(function(e){1===e.data.code&&(t.noticeForm={noti_title:e.data.data.notiTitle,content:e.data.data.content,noti_userid:e.data.data.notiUserid,noti_url:e.data.data.notiUrl,noti_id:t.noticeId})})},getAuthorList:function(){var t=this;d.default.post({ext:"editor/page",pageNum:1,pageSize:100}).then(function(e){1===e.data.code&&(t.authorList=e.data.data.list)})},addNotice:function(){var t=this,e=(0,s.default)(this.noticeForm,{ext:"system/notice/add"});d.default.post(e).then(function(e){1===e.data.code?(t.$notify({showClose:!0,type:"success",message:"添加成功!"}),t.$router.push({path:"/user-notice"})):t.$notify({showClose:!0,type:"error",message:e.data.msg})})},editNotice:function(){var t=this;this.formatPostData("edit").then(function(e){d.default.put(e).then(function(e){1===e.data.code?(t.$notify({showClose:!0,type:"success",message:"操作成功!"}),t.$router.push({path:"/user-notice"})):t.$notify({showClose:!0,type:"error",message:e.data.msg})})})},formatPostData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return new r.default(function(o){var n=(0,s.default)(t.noticeForm,{ext:"system/notice/"+e});o(n)})}}}}});
//# sourceMappingURL=15.90df1bfe3087dbde259f.js.map