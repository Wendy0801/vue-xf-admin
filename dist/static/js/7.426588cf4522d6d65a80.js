webpackJsonp([7,48],{19:function(t,e,o){e=t.exports=o(3)(),e.push([t.id,".el-upload{margin-top:12px}","",{version:3,sources:["/./src/components/ImgUploader.vue"],names:[],mappings:"AACA,WACE,eAAiB,CAClB",file:"ImgUploader.vue",sourcesContent:["\n.el-upload{\n  margin-top: 12px;\n}\n"],sourceRoot:"webpack://"}])},20:function(t,e,o){var i=o(19);"string"==typeof i&&(i=[[t.id,i,""]]);o(4)(i,{});i.locals&&(t.exports=i.locals)},21:function(t,e,o){o(20);var i=o(2)(o(28),o(22),null,null);t.exports=i.exports},22:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-upload",{attrs:{action:t.uploadUrl,data:t.uploadImgData,name:"file","on-success":t.onSuccess,"before-upload":t.checkData}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v(t._s(t.btnText))])],1)],1)},staticRenderFns:[]}},28:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(36),r=i(s);e.default={data:function(){return{uploadUrl:"http://up-z2.qiniu.com/",qiniuImgUrl:this.qnImgUrl,uploadImgData:{token:""}}},props:["btnText","token","limit","qnImgUrl"],watch:{token:function(){this.token&&""!==this.token&&this.initConfig()}},mounted:function(){},methods:{initConfig:function(){this.uploadImgData={token:this.token}},checkData:function(t){var e=this;return new r.default(function(o,i){if(e.limit){var s=new FileReader;s.readAsDataURL(t),s.onload=function(t){var s=new Image;s.src=t.target.result,console.log(s.src),s.onload=function(t){console.log(s.width,s.height),console.log(e.limit.width,e.limit.height),s.width<=e.limit.width&&s.height<=e.limit.height?o(!0):(e.$emit("onSizeError","图片尺寸不符合规范"),i("图片尺寸不符合规范"))}}}else o(!0)})},onSuccess:function(t){var e=""+this.qiniuImgUrl+t.key;this.$emit("onSuccess",e,t)}}}},231:function(t,e,o){e=t.exports=o(3)(),e.push([t.id,".user-edit-container[data-v-379c0496]{padding:50px 12px}.dialog-footer[data-v-379c0496]{float:right}","",{version:3,sources:["/./src/pages.guo/fictitiousUsers/fictitiousUser.scss"],names:[],mappings:"AACA,sCAAsC,iBAAiB,CACtD,AACD,gCAAgC,WAAW,CAC1C",file:"fictitiousUser.scss",sourcesContent:["\n.user-edit-container[data-v-379c0496]{padding:50px 12px\n}\n.dialog-footer[data-v-379c0496]{float:right\n}\n"],sourceRoot:"webpack://"}])},275:function(t,e,o){var i=o(231);"string"==typeof i&&(i=[[t.id,i,""]]);o(4)(i,{});i.locals&&(t.exports=i.locals)},366:function(t,e,o){o(275);var i=o(2)(o(695),o(413),"data-v-379c0496",null);t.exports=i.exports},413:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",{staticClass:"user-edit-container"},[o("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"120px",rules:t.editFormRules}},[o("el-form-item",{attrs:{label:"用户名",prop:"cust_name"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.cust_name,expression:"editForm.cust_name"}],domProps:{value:t.editForm.cust_name},on:{input:function(e){t.editForm.cust_name=e}}})],1),t._v(" "),o("el-form-item",{attrs:{label:"电话号码",prop:"cust_mobile"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.cust_mobile,expression:"editForm.cust_mobile"}],domProps:{value:t.editForm.cust_mobile},on:{input:function(e){t.editForm.cust_mobile=e}}})],1),t._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"sex"}},[o("el-radio-group",{directives:[{name:"model",rawName:"v-model",value:t.editForm.sex,expression:"editForm.sex"}],domProps:{value:t.editForm.sex},on:{input:function(e){t.editForm.sex=e}}},[o("el-radio",{attrs:{label:1}},[t._v("男")]),t._v(" "),o("el-radio",{attrs:{label:2}},[t._v("女")])],1)],1),t._v(" "),o("el-form-item",{attrs:{label:"用户个性签名",prop:"cust_desc"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.cust_desc,expression:"editForm.cust_desc"}],domProps:{value:t.editForm.cust_desc},on:{input:function(e){t.editForm.cust_desc=e}}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"cust_portrait"}},[o("img",{directives:[{name:"show",rawName:"v-show",value:t.editForm.cust_portrait,expression:"editForm.cust_portrait"}],attrs:{src:t.editForm.cust_portrait,width:"200"}}),t._v(" "),o("img-uploader",{attrs:{btnText:"上传头像",token:t.uptoken,qnImgUrl:t.domain},on:{onSuccess:t.uploadSuccess}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{on:{click:t.submitCancel}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.submitSure}},[t._v("确 定")])],1)],1)},staticRenderFns:[]}},695:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=o(5),r=i(s),a=o(21),n=i(a);e.default={data:function(){return{uptoken:"",domain:"",editForm:{cust_id:"",cust_name:"",cust_mobile:"",cust_desc:"",sex:"",cust_portrait:""},editFormRules:{cust_name:[{required:!0,message:"请填写用户姓名"}],cust_mobile:[{required:!0,message:"请填写用户电话"}],cust_desc:[{required:!0,message:"请填写用户个性签名"}],sex:[{required:!0,message:"请选择用户性别"}],cust_portrait:[{required:!0,message:"请上传用户头像"}]}}},components:{"img-uploader":n.default},mounted:function(){var t=this.$route.params.custId;t?(this.fictitiousEdit(t),this.editForm.cust_id=t):this.editForm.cust_id="",this.editorUpload()},methods:{fictitiousEdit:function(t){var e=this;r.default.get({ext:"robot/user/read",cust_id:t}).then(function(t){1==t.data.code&&(e.editForm={cust_id:t.data.data.custId,cust_name:t.data.data.custName,cust_mobile:t.data.data.custMobile,cust_desc:t.data.data.custDesc,sex:"男"==t.data.data.sex?1:2,cust_portrait:t.data.data.custPortrait})})},editorUpload:function(){var t=this;r.default.get({ext:"common/resource/qiniu/config"}).then(function(e){t.uptoken=e.body.uptoken,t.domain=e.body.domain})},submitSure:function(){var t=this;this.$refs.editForm.validate(function(e){e&&(""==t.editForm.cust_id?r.default.post({ext:"robot/user/add",cust_name:t.editForm.cust_name,cust_mobile:t.editForm.cust_mobile,cust_desc:t.editForm.cust_desc,sex:t.editForm.sex,cust_portrait:t.editForm.cust_portrait}).then(function(e){1==e.data.code&&(t.$notify({title:"成功",message:"添加成功",type:"success"}),t.$router.push({path:"/fictitiousUsers"}))}):r.default.post({ext:"robot/user/edit",cust_id:t.editForm.cust_id,cust_name:t.editForm.cust_name,cust_mobile:t.editForm.cust_mobile,cust_desc:t.editForm.cust_desc,sex:t.editForm.sex,cust_portrait:t.editForm.cust_portrait}).then(function(e){1==e.data.code&&(t.$notify({title:"成功",message:"编辑成功",type:"success"}),t.$router.push({path:"/fictitiousUsers"}))}))})},submitCancel:function(){},uploadSuccess:function(t){this.editForm.cust_portrait=this.domain+t}}}}});
//# sourceMappingURL=7.426588cf4522d6d65a80.js.map