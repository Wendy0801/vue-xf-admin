webpackJsonp([26,48],{238:function(t,e,i){e=t.exports=i(3)(),e.push([t.id,"","",{version:3,sources:[],names:[],mappings:"",file:"picture.vue",sourceRoot:"webpack://"}])},282:function(t,e,i){var n=i(238);"string"==typeof n&&(n=[[t.id,n,""]]);i(4)(n,{});n.locals&&(t.exports=n.locals)},376:function(t,e,i){i(282);var n=i(2)(i(705),i(422),null,null);t.exports=n.exports},422:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",[[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.pictureList,stripe:""},on:{"selection-change":t.batchSelect}},[i("el-table-column",{attrs:{type:"selection"}}),t._v(" "),i("el-table-column",{attrs:{prop:"sequenceNumber",width:"100",label:"序号"}}),t._v(" "),i("el-table-column",{attrs:{label:"缩略图",width:"150"},scopedSlots:{default:function(e){return[i("img",{staticClass:"preview-img",attrs:{src:e.row.photUrl,alt:""},on:{click:function(i){t.showPreview(e.$index)}}})]}}}),t._v(" "),i("el-table-column",{attrs:{prop:"photSource",label:"图片位置"}}),t._v(" "),i("el-table-column",{attrs:{prop:"photUsername",label:"发布者"}}),t._v(" "),i("el-table-column",{attrs:{context:t._self,label:"操作"},inlineTemplate:{render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){t.pictureDel(t.row)}}},[t._v("删除")])],1)},staticRenderFns:[]}})],1)],t._v(" "),i("el-col",{staticClass:"toolbar",attrs:{span:24}},[i("el-button",{attrs:{type:"primary"},on:{click:t.batchDel}},[t._v("批量删除")]),t._v(" "),i("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,prev, pager, next,jumper",total:t.total,"page-size":10},on:{"current-change":t.activityCurrentChange}})],1)],2)},staticRenderFns:[]}},705:function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=i(5),a=n(o);e.default={name:"picture",data:function(){return{pictureList:[],pictureId:[],imgList:[],total:0,pSize:10,pageNum:1,listLoading:!0}},computed:{},mounted:function(){this.getPictureList()},methods:{getPictureList:function(){var t=this;a.default.post({ext:"ugc/photo/page",pageNum:this.pageNum,pageSize:this.pSize}).then(function(e){t.pictureList=e.data.data.list,t.total=e.data.data.total,t.listLoading=!1,t.pictureList.map(function(e){t.imgList.push(e.photUrl)})})},pictureDel:function(t){var e=this;console.log(t),this.$confirm("您确定要删除该图片","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.default.post({ext:"ugc/photo/delete",ids:t.photId}).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success"}),e.listLoading=!0,e.getPictureList()})}).catch(function(){})},batchSelect:function(t){this.pictureId=[];for(var e=0;e<t.length;e++)this.pictureId.push(t[e].photId)},batchDel:function(){var t=this;if(this.pictureId.length>0){var e=this.pictureId.join(",");this.$confirm("您确定要删除图片","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){a.default.post({ext:"ugc/photo/delete",ids:e}).then(function(e){t.$notify({title:"成功",message:"操作成功",type:"success"}),t.listLoading=!0,t.getPictureList()})}).catch(function(){})}else this.$confirm("请勾选您需要删除的图片","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).catch(function(){})},activityCurrentChange:function(t){this.pageNum=t,this.getPictureList()},showPreview:function(t){function e(){a.$preview.open(t,n)}var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.imgList,n=[],o=0,a=this;i.map(function(t,a){var c=new Image;c.src=t,c.onload=function(){o++,n.push({src:t,w:c.width,h:c.height}),o===i.length&&e()},c.onerror=function(){o++,n.splice(a,0,{src:"/static/images/default1.jpg",w:100,h:100}),o===i.length&&e()}})}}}}});
//# sourceMappingURL=26.7222911c445aa238f5d3.js.map