webpackJsonp([38,48],{379:function(t,e,o){var i=o(2)(o(708),o(438),null,null);t.exports=i.exports},438:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("section",[o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.k_keyword,expression:"k_keyword"}],attrs:{placeholder:"请输入搜索的关键字"},domProps:{value:t.k_keyword},on:{change:t.allList,input:function(e){t.k_keyword=e}}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{type:"primary",placeholder:"请输入搜索词"},on:{click:t.getKeywordList}},[t._v("搜索")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.keywordAdd}},[t._v("添加搜索词")])],1)],1)],1),t._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{stripe:"",data:t.keywordList},on:{"selection-change":t.batchSelect}},[o("el-table-column",{attrs:{type:"selection"}}),t._v(" "),o("el-table-column",{attrs:{width:"100",label:"序号",prop:"kno"}}),t._v(" "),o("el-table-column",{attrs:{label:"搜索词",prop:"kkeyword"}}),t._v(" "),o("el-table-column",{attrs:{label:"分类"},scopedSlots:{default:function(e){return[t._v("\n                    "+t._s(1==e.row.ktype?"选手":2==e.row.ktype?"资讯":"活动")+"\n                ")]}}}),t._v(" "),o("el-table-column",{attrs:{label:"排序管理"},scopedSlots:{default:function(e){return[o("el-input",{attrs:{value:e.row.ksort},on:{focus:function(o){t.changeSort(e.row)}}})]}}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:{default:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){t.keywordEdit(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){t.keywordDel(e.row)}}},[t._v("删除")])]}}})],1)],t._v(" "),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-button",{attrs:{type:"primary"},on:{click:t.batchDel}},[t._v("批量删除")]),t._v(" "),o("el-pagination",{attrs:{layout:"total, prev, pager, next, jumper",total:t.total},on:{"current-change":t.keywordCurrentChange}})],1),t._v(" "),o("el-dialog",{directives:[{name:"model",rawName:"v-model",value:t.editFormVisible,expression:"editFormVisible"}],attrs:{title:t.editFormTtile},domProps:{value:t.editFormVisible},on:{close:t.editCancel,input:function(e){t.editFormVisible=e}}},[o("el-form",{ref:"editForm",attrs:{model:t.editForm,"label-width":"80px",rules:t.editFormRules}},[o("el-form-item",{attrs:{label:"搜索词",prop:"k_keyword"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.k_keyword,expression:"editForm.k_keyword"}],attrs:{placeholder:"请输入搜索词"},domProps:{value:t.editForm.k_keyword},on:{input:function(e){t.editForm.k_keyword=e}}})],1),t._v(" "),o("el-form-item",{attrs:{label:"分类",prop:"k_type"}},[o("el-select",{directives:[{name:"model",rawName:"v-model",value:t.editForm.k_type,expression:"editForm.k_type"}],attrs:{placeholder:"请选择分类"},domProps:{value:t.editForm.k_type},on:{input:function(e){t.editForm.k_type=e}}},t._l(t.KType,function(t){return o("el-option",{attrs:{label:t.name,value:t.value}})}))],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.editCancel}},[t._v("取消")]),t._v(" "),o("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.editSumit}},[t._v(t._s(t.btnEditText))])],1)],1)],2)},staticRenderFns:[]}},708:function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(5),n=i(r);e.default={name:"keyword",data:function(){return{keywordList:[],keywordId:[],KType:[{name:"选手",value:1},{name:"资讯",value:2},{name:"活动",value:3}],total:0,pageSize:10,pageNum:1,k_keyword:"",listLoading:!1,editFormTtile:"新增",editFormVisible:!1,editForm:{k_id:"",k_keyword:"",k_type:""},editFormRules:{k_keyword:[{required:!0,message:"请输入搜索词",trigger:"blur"}],k_type:[{required:!0,message:"请选择分类"}]},btnEditText:"提交",editLoading:!1}},mounted:function(){this.getKeywordList()},methods:{getKeywordList:function(){var t=this;n.default.post({ext:"homepage/keyword/page",pageNum:this.pageNum,pageSize:this.pageSize,k_keyword:this.k_keyword}).then(function(e){t.keywordList=e.data.data.list,t.total=e.data.data.total,t.listLoading=!1})},allList:function(){this.k_keyword||this.getKeywordList()},keywordAdd:function(){this.editFormTtile="新增",this.editFormVisible=!0,this.editForm.k_id="",this.editForm.k_keyword="",this.editForm.k_type=""},keywordEdit:function(t){console.log(t),this.editFormTtile="编辑",this.editFormVisible=!0,this.editForm.k_id=t.kid,this.editForm.k_keyword=t.kkeyword,this.editForm.k_type=t.ktype},editSumit:function(){var t=this;this.$refs.editForm.validate(function(e){return e?void(""==t.editForm.k_id?n.default.post({ext:"homepage/keyword/add",k_keyword:t.editForm.k_keyword,k_type:t.editForm.k_type}).then(function(e){return 1!=e.data.code?(t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"}).catch(function(){}),!1):(t.$notify({title:"成功",message:"添加成功",type:"success"}),t.editFormVisible=!1,t.listLoading=!0,t.getKeywordList(),void 0)}):n.default.put({ext:"homepage/keyword/edit",k_id:t.editForm.k_id,k_keyword:t.editForm.k_keyword,k_type:t.editForm.k_type}).then(function(e){t.$notify({title:"成功",message:"添加成功",type:"success"}),t.editFormVisible=!1,t.listLoading=!0,t.getKeywordList()})):(t.$alert("信息填写不完整!","提示",{confirmButtonText:"确定"}).catch(function(){}),!1)})},editCancel:function(){this.editFormVisible=!1,this.$refs.editForm.resetFields()},changeSort:function(t){var e=this;this.$prompt("请输入序号","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(o){var i=o.value;return i?void n.default.put({ext:"homepage/keyword/sort",ids:t.kid,k_sort:i}).then(function(t){e.$notify({title:"成功",message:"操作成功",type:"success"}),e.listLoading=!0,e.getKeywordList()}):(e.$alert("序列号不能为空","提示",{confirmButtonText:"确定"}).then(function(){}).catch(function(){}),!1)}).catch(function(){})},keywordDel:function(t){var e=this;this.$confirm("您确定要删除该搜索词?","提示",{confirmButtonText:"确定"}).then(function(){n.default.post({ext:"homepage/keyword/delete",ids:t.kid}).then(function(t){e.$notify({title:"成功",message:"操作成功",type:"success"}),e.listLoading=!0,e.getKeywordList()})}).catch(function(){})},batchSelect:function(t){this.keywordId=[];for(var e=0;e<t.length;e++)this.keywordId.push(t[e].kid)},batchDel:function(){var t=this;if(this.keywordId.length>0){var e=this.keywordId.join(",");this.$confirm("您确定要删除搜索词?","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){n.default.post({ext:"homepage/keyword/delete",ids:e}).then(function(e){t.$notify({title:"成功",message:"操作成功",type:"success"}),t.listLoading=!0,t.getKeywordList()})}).catch(function(){})}else this.$confirm("请勾选需要删除的搜索词","提示",{confirmButtonText:"确定"}).catch(function(){})},keywordCurrentChange:function(t){this.pageNum=t,this.getKeywordList()}}}}});
//# sourceMappingURL=38.99d7fd53f1f65d3a072f.js.map