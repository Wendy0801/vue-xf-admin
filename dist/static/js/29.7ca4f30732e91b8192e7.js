webpackJsonp([29,48],{233:function(e,t,o){t=e.exports=o(3)(),t.push([e.id,".el-form-item img{width:100px}","",{version:3,sources:["/./src/pages.guo/administration/administration.vue"],names:[],mappings:"AACA,kBACI,WAAa,CAChB",file:"administration.vue",sourcesContent:["\n.el-form-item img {\n    width: 100px;\n}\n"],sourceRoot:"webpack://"}])},277:function(e,t,o){var r=o(233);"string"==typeof r&&(r=[[e.id,r,""]]);o(4)(r,{});r.locals&&(e.exports=r.locals)},358:function(e,t,o){o(277);var r=o(2)(o(687),o(417),null,null);e.exports=r.exports},417:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-form",{attrs:{inline:!0}},[o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:e.userAdd}},[e._v("新增用户")])],1)],1)],1),e._v(" "),[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{stripe:"",data:e.userList}},[o("el-table-column",{attrs:{type:"index",width:"100",label:"序号"}}),e._v(" "),o("el-table-column",{attrs:{label:"用户名",prop:"userName"}}),e._v(" "),o("el-table-column",{attrs:{label:"手机号",prop:"phone"}}),e._v(" "),o("el-table-column",{attrs:{label:"角色"},scopedSlots:{default:function(t){return e._l(t.row.roles,function(t,r){return o("span",[e._v(e._s(t.roleName)+",")])})}}}),e._v(" "),o("el-table-column",{attrs:{label:"状态",prop:"state"},scopedSlots:{default:function(t){return[o("span",[e._v(e._s(1==t.row.state?"冻结":"解冻"))])]}}}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:{default:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){e.roleEdit(t.row)}}},[e._v("配置角色类型")]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){e.statusOper(t.row)}}},[e._v(e._s(1==t.row.state?"解冻":"冻结"))])]}}})],1)],e._v(" "),o("el-col",{staticClass:"toolbar",attrs:{span:24}},[o("el-pagination",{staticStyle:{float:"right"},attrs:{layout:"total,prev, pager, next,jumper",total:e.total},on:{"current-change":e.userCurrentChange}})],1),e._v(" "),o("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.editFormAdd,expression:"editFormAdd"}],attrs:{title:"新增"},domProps:{value:e.editFormAdd},on:{close:e.editCancel,input:function(t){e.editFormAdd=t}}},[o("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"80px",rules:e.editFormRules}},[o("el-form-item",{attrs:{label:"用户名",prop:"user_name"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.user_name,expression:"editForm.user_name"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.user_name},on:{input:function(t){e.editForm.user_name=t}}})],1),e._v(" "),o("el-form-item",{attrs:{label:"密码",prop:"password"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.password,expression:"editForm.password"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.password},on:{input:function(t){e.editForm.password=t}}})],1),e._v(" "),o("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.phone,expression:"editForm.phone"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.phone},on:{input:function(t){e.editForm.phone=t}}})],1),e._v(" "),o("el-form-item",{attrs:{prop:"avatar"}},[[o("img",{directives:[{name:"show",rawName:"v-show",value:e.editForm.avatar,expression:"editForm.avatar"}],attrs:{src:e.editForm.avatar,alt:""}})],e._v(" "),o("el-upload",{attrs:{action:e.uploadUrl,"on-success":e.UploadImgSucess}},[o("el-button",{staticStyle:{"margin-top":"12px"},attrs:{size:"small",type:"primary"}},[e._v("上传用户头像")])],1)],2),e._v(" "),o("el-form-item",{attrs:{label:"地区"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.area,expression:"editForm.area"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.area},on:{input:function(t){e.editForm.area=t}}})],1),e._v(" "),o("el-form-item",{attrs:{label:"个性签名",prop:"signature"}},[o("el-input",{directives:[{name:"model",rawName:"v-model",value:e.editForm.signature,expression:"editForm.signature"}],attrs:{"auto-complete":"off"},domProps:{value:e.editForm.signature},on:{input:function(t){e.editForm.signature=t}}})],1),e._v(" "),o("el-form-item",{attrs:{label:"状态"}},[o("el-switch",{directives:[{name:"model",rawName:"v-model",value:e.editForm.state,expression:"editForm.state"}],attrs:{"on-text":"冻结","off-text":"解冻"},domProps:{value:e.editForm.state},on:{input:function(t){e.editForm.state=t}}})],1),e._v(" "),o("el-form-item",{attrs:{label:"性别",prop:"gender"}},[[o("el-radio",{directives:[{name:"model",rawName:"v-model",value:e.editForm.gender,expression:"editForm.gender"}],staticClass:"radio",attrs:{label:"1"},domProps:{value:e.editForm.gender},on:{input:function(t){e.editForm.gender=t}}},[e._v("男")]),e._v(" "),o("el-radio",{directives:[{name:"model",rawName:"v-model",value:e.editForm.gender,expression:"editForm.gender"}],staticClass:"radio",attrs:{label:"2"},domProps:{value:e.editForm.gender},on:{input:function(t){e.editForm.gender=t}}},[e._v("女")])]],2)],1),e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{on:{click:e.editCancel}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary "},on:{click:e.AddSumbit}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{directives:[{name:"model",rawName:"v-model",value:e.editFormVisible,expression:"editFormVisible"}],attrs:{title:"编辑角色"},domProps:{value:e.editFormVisible},on:{close:e.editCancel,input:function(t){e.editFormVisible=t}}},[[o("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),o("el-checkbox-group",{directives:[{name:"model",rawName:"v-model",value:e.checkedRole,expression:"checkedRole"}],domProps:{value:e.checkedRole},on:{change:e.roleCheckedCitiesChange,input:function(t){e.checkedRole=t}}},e._l(e.roleList,function(t){return o("el-checkbox",{attrs:{label:t.roleId}},[e._v(e._s(t.roleName))])}))],e._v(" "),o("div",{staticClass:"dialog-footer",slot:"footer"},[o("el-button",{on:{click:e.editCancel}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary "},on:{click:e.editSumbit}},[e._v("确 定")])],1)],2)],2)},staticRenderFns:[]}},687:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=o(5),i=r(a);t.default={data:function(){return{userList:[],roleList:[],name:"",pageSize:10,pageNum:1,total:0,listLoading:!1,editFormVisible:!1,editFormAdd:!1,checkedRole:[],checkAll:!1,userId:"",editForm:{user_name:"",password:"",phone:"",avatar:"",area:"",signature:"",state:!0,gender:""},editFormRules:{user_name:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],avatar:[{required:!0,message:"请上传用户头像"}],area:[{required:!0,message:"请填写地区"}],gender:[{required:!0,message:"请选择用户性别"}]},uploadUrl:i.default.getUploadUrl()}},mounted:function(){this.getUserList(),this.getRoleList()},methods:{getUserList:function(){var e=this;i.default.get({ext:"system/user/page",pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){e.userList=t.data.data.list,e.total=t.data.data.total}),this.listLoading=!1},getRoleList:function(){var e=this;i.default.get({ext:"system/role/readList"}).then(function(t){console.log(t),e.roleList=t.data.data,console.log(e.roleList)})},roleEdit:function(e){var t=this;console.log(e),this.editFormVisible=!0,i.default.get({ext:"system/user/role/readList",user_id:e.userId}).then(function(e){t.checkedRole=[],console.log(e.data.data);for(var o=e.data.data,r=0;r<o.length;r++)t.checkedRole.push(o[r].roleId)}),this.userId=e.userId},statusOper:function(e){var t=this;console.log(e),1==e.state?this.$confirm("您确定要解冻该用户","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){i.default.put({ext:"system/user/state",ids:e.userId,state:0}).then(function(e){t.$notify({title:"成功",message:"操作成功",type:"success"}),t.listLoading=!0,t.getUserList()})}).catch(function(){}):this.$confirm("您确定要冻结该用户","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){i.default.put({ext:"system/user/state",ids:e.userId,state:1}).then(function(e){t.$notify({title:"成功",message:"操作成功",type:"success"}),t.listLoading=!0,t.getUserList()})}).catch(function(){})},editCancel:function(){this.editFormVisible=!1},userCurrentChange:function(e){this.pageNum=e,this.getUserList(this.pageNum)},roleCheckedCitiesChange:function(){console.log(this.checkedRole)},roleCheckAllChange:function(e){if(e.target.checked)for(var t=0;t<this.roleList.length;t++)this.checkedRole.push(this.roleList[t].roleId);else this.checkedRole=[]},userAdd:function(){this.editFormAdd=!0,this.editForm={user_name:"",password:"",phone:"",avatar:"",area:"",signature:"",state:"",gender:""}},AddSumbit:function(){var e=this;this.$refs.editForm.validate(function(t){return t?void i.default.post({ext:"system/user/add",user_name:e.editForm.user_name,password:e.editForm.password,phone:e.editForm.phone,avatar:e.editForm.avatar,area:e.editForm.area,signature:e.editForm.signature,state:e.editForm.state?1:0,gender:e.editForm.gender}).then(function(){e.editFormAdd=!1,e.listLoading=!0,e.getUserList()}):(e.$alert("信息填写不完整!","提示",{confirmButtonText:"确定"}).catch(function(){}),!1)})},editSumbit:function(){var e=this;this.editFormVisible=!1;var t=this.checkedRole.join(",");i.default.put({ext:"system/user/role/edit",user_id:this.userId,role_id:t}).then(function(t){e.$notify({title:"成功",message:"操作成功",type:"success"}),e.listLoading=!0,e.getUserList()})},UploadImgSucess:function(e,t){this.editForm.avatar=e.url}}}}});
//# sourceMappingURL=29.7ca4f30732e91b8192e7.js.map